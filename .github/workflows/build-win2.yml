name: Build (Windows, 2)

on: workflow_dispatch

jobs:
  build:
    runs-on: windows-latest
    steps:
    
    - uses: actions/checkout@v2
      with:
        ref: master

    - name: Get latest CMake
      uses: lukka/get-cmake@latest
      
    - name: Run vcpkg
      uses: lukka/run-vcpkg@v6
      with:
        vcpkgDirectory: '${{ github.workspace }}/vcpkg/'
        vcpkgTriplet: ${{ matrix.triplet }}
      
    - name: Build with CMake
      uses: lukka/run-cmake@main
      with:
        buildDirectory: '${{ github.workspace }}'
        useVcpkgToolchainFile: true
        cmakeGenerator: VS16Win64
      
    - name: Check output
      run: |
        ls

    - name: Store bundles
      uses: actions/upload-artifact@v2
      with:
        name: mocca-windows
        path: mocca.exe
      
#        cmakeListsOrSettingsJson: CMakeListsTxtAdvanced
#    - name: Test
#      run: |
#        mocca.exe

